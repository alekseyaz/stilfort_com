$(document).ready(function () {

    //newItems SLIDER

    $('.newsItem__slider').slick({
        
        slidesToShow: 1,
        slidesToScroll: 1,
        arrows: true,
        dots: true,
        nextArrow: $(".newItem__slider-next"),
        prevArrow: $(".newItem__slider-prev"),
      });

      $('.newsItem__slider-mobile').slick({
        
        slidesToShow: 1,
        slidesToScroll: 1,
        arrows: false,
        dots: true
      });

    //ADVANTAGES MOBILE SLIDER

    $('.advantages__mobile').slick({
        
      slidesToShow: 1,
      slidesToScroll: 1,
      arrows: false,
      dots: true
    });

    //Carousel Slider

    $('.carousel__slider').slick({
        
        slidesToShow: 1,
        slidesToScroll: 1,
        arrows: false,
        dots: false,
        autoplay: true,
        autoplaySpeed: 2000,
        centerMode: true
      });

    //FactsSlider

      $('.facts__slider').slick({
        
        slidesToShow: 1,
        slidesToScroll: 1,
        arrows: false,
        dots: true
      });

    //Production Slider

    $('.production__slider').slick({
        
      slidesToShow: 1,
      slidesToScroll: 1,
      arrows: false,
      dots: true
    });

      //About Slider

      $('.about__slider').slick({
        infinite: false,
        slidesToShow: 1,
        slidesToScroll: 1,
        arrows: false,
        dots: true
      });

      //More Products Slider

      $('.more__slider').slick({
        slidesToShow: 4,
        slidesToScroll: 4,
        arrows: true,
        dots: true,
        nextArrow: $(".more__slider-next"),
        prevArrow: $(".more__slider-prev"),
        responsive: [
          {
            breakpoint: 1200,
            settings: {
              slidesToShow: 3,
              slidesToScroll: 3
            }
          },
          {
            breakpoint: 1000,
            settings: {
              slidesToShow: 2,
              slidesToScroll: 2
            }
          },
          {
            breakpoint: 700,
            settings: {
              slidesToShow: 1,
              slidesToScroll: 1,
              infinite: false
            }
          },
        ]
      });
  

    // VIDEO MODAL SCRIPT

      $('.video').magnificPopup({
        type: 'iframe',
        
        
        iframe: {
          patterns: {
            dailymotion: {
             
              index: 'dailymotion.com',
              
              id: function(url) {        
                  var m = url.match(/^.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/);
                  if (m !== null) {
                      if(m[4] !== undefined) {
                        
                          return m[4];
                      }
                      return m[2];
                  }
                  return null;
              },
              
              src: 'https://www.dailymotion.com/embed/video/%id%'
              
            }
          }
        }
        
        
      });

    //VIDEO MOBILE SLIDER
    
    // Флаг включённости слайдера
    var slickSliderActive = false;
    var slickSliderActive2 = false;

    // Включение или выключение слайдера (в зависимости от ширины)
    function checkSlider(){    
      
      // Если вьюпорт уже чем 768 
      if($(window).width() < 700 - getScroll()){
        
        // Если флаг включённости опущен, то включим и поднимем флаг
        if(slickSliderActive == false){
          $('.videos__slider').slick({
            dots: true,
            infinite: false,
            arrows: false,
            slidesToShow: 1,
            slidesToScroll: 1
          });
          slickSliderActive = true;
        }
      
      // Иначе (вьюпорт НЕ уже чем 768)
      } else {
        
        // Если флаг включённости поднят, выключаем и опускаем флаг
        if(slickSliderActive){
          $('.videos__slider').slick('unslick');
          slickSliderActive = false;
        }
        
      }
    };

    function checkSlider2(){    
      
      // Если вьюпорт уже чем 768 
      if($(window).width() < 701 - getScroll()){
        
        // Если флаг включённости опущен, то включим и поднимем флаг
        if(slickSliderActive2 == false){
          $('.certificates__slider').slick({
            dots: true,
            infinite: false,
            arrows: false,
            slidesToShow: 1,
            slidesToScroll: 1
          });
          slickSliderActive2 = true;
        }
      
      // Иначе (вьюпорт НЕ уже чем 768)
      } else {
        
        // Если флаг включённости поднят, выключаем и опускаем флаг
        if(slickSliderActive2){
          $('.certificates__slider').slick('unslick');
          slickSliderActive2 = false;
        }
        
      }
    };


    // По готовности DOM...
    $(document).ready(function(){
      checkSlider();
      checkSlider2();
    });

    // По любому изменению размера вьюпорта...
    $(window).on('resize', function(){
      checkSlider();
      checkSlider2();
    });

    function getScroll(){
      var div = document.createElement('div');
      div.style.overflowY = 'scroll';
      div.style.width = '50px';
      div.style.height = '50px';
      div.style.visibility = 'hidden';
      document.body.appendChild(div);
      var scrollWidth = div.offsetWidth - div.clientWidth;
      document.body.removeChild(div);
      return scrollWidth;
    }

    // FORM POPUP
 
        $('.popup-modal').magnificPopup({
            type: 'inline',
            preloader: false,
            modal: true
        });
        $(document).on('click', '.popup-modal-dismiss', function (e) {
            e.preventDefault();
            $.magnificPopup.close();
        });

      //HEADER STICKY
      var header1 = $('.header__sticky');
 
      $(window).scroll(function () {
        if ($(this).scrollTop() > 80 && $(window).width() > 1200) {
          header1.show();
        } else {
          header1.hide();
            }
        });

        $(".eshop__radio").click(function(){

          if($(this).hasClass("active")) {
            
          }

          else{
            $(".retail__radio").removeClass("active");
            $(".retail__list").removeClass("active");
            $(this).toggleClass("active");
            $(".eshop__list").toggleClass("active");
          }
          
        });

        $(".retail__radio").click(function(){

          if($(this).hasClass("active")) {
            
          }

          else{
            $(".eshop__radio").removeClass("active");
            $(".eshop__list").removeClass("active");
            $(this).toggleClass("active");
            $(".retail__list").toggleClass("active");
          }
          
        });


      //FILTER POPUP

      $(".results__filter").click(function(){
        $(this).toggleClass('active')
        $(".results__selects").toggleClass('active')
      })

});
